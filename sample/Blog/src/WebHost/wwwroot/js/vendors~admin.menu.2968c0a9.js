(window.webpackJsonp=window.webpackJsonp||[]).push([["vendors~admin.menu"],{"078b":function(e,t,o){},"0cae":function(e,t,o){"use strict";o.r(t);var r=o("2f62"),n=o("b109"),l=o("e84a"),s=[{name:"id",label:"编号",show:!1},{name:"name",label:"名称",sortable:!0,width:"150"},{name:"typeName",label:"类型"},{name:"routeName",label:"路由名称",width:"150"},{name:"icon",label:"图标"},{name:"iconColor",label:"图标颜色"},{name:"level",label:"等级"},{name:"show",label:"是否显示"},{name:"sort",label:"排序"},{name:"targetName",label:"打开方式"}],a=o("3ee3"),i={data:function(){return{form:{noLoading:!0,action:l.a.add,model:{moduleCode:"",parentId:"",type:0,name:"",routeName:"",routeParams:"",routeQuery:"",icon:"",iconColor:"",url:"",show:!0,target:0,dialogWidth:"",dialogHeight:"",dialogFullscreen:!0,sort:0,remarks:""},rules:{name:[{required:!0,message:"请输入菜单名称"}]}},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","sort"],methods:{submit:function(){this.$refs.form.submit()},reset:function(){var e=this;this.$nextTick(function(){e.$refs.form.reset(),e.setProps()})},setProps:function(){this.form.model.parentId=this.parent.id,this.form.model.sort=this.sort},onSuccess:function(){this.$emit("success")},onError:function(){this.$emit("error")},onValidateError:function(){this.$emit("validate-error")}}},m={mixins:[i]},c=o("2877"),u=Object(c.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,d=o("c17f"),f={mixins:[i],components:{ModuleInfoSelect:d.a},data:function(){return{form:{model:{type:1},rules:{moduleCode:[{required:!0,message:"请选择模块"}],routeName:[{required:!0,message:"请选择路由名称"}]}}}},computed:{routes:function(){var t=[],o=this.form.model.moduleCode;return o&&this.$router.options.routes.forEach(function(e){e&&e.name&&e.name.toLowerCase().startsWith(o.toLowerCase())&&t.push({name:e.meta.title,code:e.name})}),t}},methods:{onRouteChange:function(e){for(var t=0;t<this.routes.length;t++){var o=this.routes[t];if(o.code===e){this.form.model.name=o.name,this.form.model.routeName=o.code;break}}}}},p=Object(c.a)(f,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"所属模块：",prop:"moduleCode"}},[o("module-info-select",{model:{value:t.form.model.moduleCode,callback:function(e){t.$set(t.form.model,"moduleCode",e)},expression:"form.model.moduleCode"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"选择路由：",prop:"route"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onRouteChange},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}},t._l(t.routes,function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}},[o("span",[t._v(t._s(e.name)+"("+t._s(e.code)+")")])])}),1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由名称：",prop:"routeName"}},[o("el-input",{attrs:{disabled:""},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeParams"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"params"},model:{value:t.form.model.routeParams,callback:function(e){t.$set(t.form.model,"routeParams",e)},expression:"form.model.routeParams"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeQuery"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"query"},model:{value:t.form.model.routeQuery,callback:function(e){t.$set(t.form.model,"routeQuery",e)},expression:"form.model.routeQuery"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,b={mixins:[a.b.select],data:function(){return{action:l.a.getTargetSelect}}},h=Object(c.a)(b,void 0,void 0,!1,null,null,null).exports,g={mixins:[i],components:{TargetSelect:h},data:function(){return{route:"",form:{model:{type:2},rules:{url:[{type:"url",message:"请输入正确的链接格式"}]}}}},computed:{dialogTarget:function(){return 2===this.form.model.target}}},v=Object(c.a)(g,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"链接：",prop:"url"}},[o("el-input",{model:{value:t.form.model.url,callback:function(e){t.$set(t.form.model,"url",e)},expression:"form.model.url"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"打开方式：",prop:"target"}},[o("target-select",{model:{value:t.form.model.target,callback:function(e){t.$set(t.form.model,"target",e)},expression:"form.model.target"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogTarget,expression:"dialogTarget"}]},[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"宽度：",prop:"dialogWidth"}},[o("el-input",{attrs:{placeholder:"默认 60%"},model:{value:t.form.model.dialogWidth,callback:function(e){t.$set(t.form.model,"dialogWidth",e)},expression:"form.model.dialogWidth"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"高度：",prop:"dialogHeight"}},[o("el-input",{attrs:{placeholder:"默认 70%"},model:{value:t.form.model.dialogHeight,callback:function(e){t.$set(t.form.model,"dialogHeight",e)},expression:"form.model.dialogHeight"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"可全屏：",prop:"dialogFullscreen"}},[o("el-switch",{model:{value:t.form.model.dialogFullscreen,callback:function(e){t.$set(t.form.model,"dialogFullscreen",e)},expression:"form.model.dialogFullscreen"}})],1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,y={mixins:[a.b.dialog],components:{NodeMenu:u,RouteMenu:p,LinkMenu:v},data:function(){return{tab:"node",dialog:{title:"添加菜单",icon:"add",width:"60%",class:"nm-admin-menu-add",loading:!1},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","sort"],methods:{onSubmit:function(){this.dialog.loading=!0,this.$refs[this.tab].submit()},onReset:function(){var e=this;this.$nextTick(function(){e.$refs[e.tab].reset()})},setProps:function(){this.$refs[this.tab].setProps()},onSuccess:function(){this.dialog.loading=!1,this.$emit("success")},onError:function(){this.dialog.loading=!1},onValidateError:function(){this.dialog.loading=!1},onOpen:function(){this.onReset()}}},k=(o("6876"),Object(c.a)(y,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-dialog",t._b({attrs:{visible:t.visible_},on:{open:t.onOpen,"update:visible":function(e){t.visible_=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("nm-button",{attrs:{text:"添加",type:"success"},on:{click:t.onSubmit}}),o("nm-button",{attrs:{text:"重置",type:"info"},on:{click:t.onReset}})]},proxy:!0}])},"nm-dialog",t.dialog,!1),[o("el-tabs",{staticClass:"nm-dialog-tabs",attrs:{type:"card"},on:{"tab-click":t.setProps},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("el-tab-pane",{attrs:{name:"node"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"node"}}),t._v("节点\n      ")],1),o("node-menu",t._g({ref:"node",attrs:{parent:t.parent,sort:t.sort}},t.on))],1),o("el-tab-pane",{attrs:{name:"route"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"link"}}),t._v("路由菜单\n      ")],1),o("route-menu",t._g({ref:"route",attrs:{parent:t.parent,sort:t.sort}},t.on))],1),o("el-tab-pane",{attrs:{name:"link"}},[o("span",{attrs:{slot:"label"},slot:"label"},[o("nm-icon",{attrs:{name:"transmit"}}),t._v("链接菜单\n      ")],1),o("link-menu",t._g({ref:"link",attrs:{parent:t.parent,sort:t.sort}},t.on))],1)],1)],1)},[],!1,null,null,null).exports),w=o("a34a"),x=o.n(w),$={data:function(){return{form:{noLoading:!0,action:l.a.update,model:{moduleCode:"",parentId:"",type:0,name:"",routeName:"",routeParams:"",routeQuery:"",icon:"",iconColor:"",url:"",show:!0,target:0,dialogWidth:"",dialogHeight:"",dialogFullscreen:!0,sort:0,remarks:""},rules:{name:[{required:!0,message:"请输入菜单名称"}]}},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["model","parent"],methods:{submit:function(){this.$refs.form.submit()},reset:function(){var e=this;this.$nextTick(function(){e.$refs.form.reset()})},setModel:function(){this.form.model=this.model},onSuccess:function(){this.$emit("success")},onError:function(){this.$emit("error")},onValidateError:function(){this.$emit("validate-error")}}},_={mixins:[$]},C=Object(c.a)(_,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,O={mixins:[$],components:{ModuleInfoSelect:d.a},data:function(){return{form:{model:{type:1},rules:{moduleCode:[{required:!0,message:"请选择模块"}],routeName:[{required:!0,message:"请选择路由名称"}]}}}},computed:{routes:function(){var t=[],o=this.form.model.moduleCode;return o&&this.$router.options.routes.forEach(function(e){e&&e.name&&e.name.toLowerCase().startsWith(o.toLowerCase())&&t.push({name:e.meta.title,code:e.name})}),t}},methods:{onRouteChange:function(e){for(var t=0;t<this.routes.length;t++){var o=this.routes[t];if(o.code===e){this.form.model.name=o.name,this.form.model.routeName=o.code;break}}}}},P=Object(c.a)(O,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"所属模块：",prop:"moduleCode"}},[o("module-info-select",{model:{value:t.form.model.moduleCode,callback:function(e){t.$set(t.form.model,"moduleCode",e)},expression:"form.model.moduleCode"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"选择路由",prop:"route"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onRouteChange},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}},t._l(t.routes,function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}},[o("span",[t._v(t._s(e.name)+"("+t._s(e.code)+")")])])}),1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由名称：",prop:"routeName"}},[o("el-input",{attrs:{disabled:""},model:{value:t.form.model.routeName,callback:function(e){t.$set(t.form.model,"routeName",e)},expression:"form.model.routeName"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeParams"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"params"},model:{value:t.form.model.routeParams,callback:function(e){t.$set(t.form.model,"routeParams",e)},expression:"form.model.routeParams"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"路由参数：",prop:"routeQuery"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"query"},model:{value:t.form.model.routeQuery,callback:function(e){t.$set(t.form.model,"routeQuery",e)},expression:"form.model.routeQuery"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports,S={mixins:[$],components:{TargetSelect:h},data:function(){return{route:"",form:{model:{type:2},rules:{url:[{type:"url",message:"请输入正确的链接格式"}]}}}},computed:{dialogTarget:function(){return 2===this.form.model.target}}},j=Object(c.a)(S,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-form",t._g(t._b({ref:"form"},"nm-form",t.form,!1),t.on),[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"父节点"}},[o("el-input",{attrs:{disabled:""},model:{value:t.parent.path,callback:function(e){t.$set(t.parent,"path",e)},expression:"parent.path"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[o("el-input",{model:{value:t.form.model.name,callback:function(e){t.$set(t.form.model,"name",e)},expression:"form.model.name"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"链接：",prop:"url"}},[o("el-input",{model:{value:t.form.model.url,callback:function(e){t.$set(t.form.model,"url",e)},expression:"form.model.url"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"图标：",prop:"icon"}},[o("nm-icon-picker",{model:{value:t.form.model.icon,callback:function(e){t.$set(t.form.model,"icon",e)},expression:"form.model.icon"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"图标颜色：",prop:"iconColor"}},[o("nm-color-picker",{model:{value:t.form.model.iconColor,callback:function(e){t.$set(t.form.model,"iconColor",e)},expression:"form.model.iconColor"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"打开方式：",prop:"target"}},[o("target-select",{model:{value:t.form.model.target,callback:function(e){t.$set(t.form.model,"target",e)},expression:"form.model.target"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogTarget,expression:"dialogTarget"}]},[o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"宽度：",prop:"dialogWidth"}},[o("el-input",{attrs:{placeholder:"默认 60%"},model:{value:t.form.model.dialogWidth,callback:function(e){t.$set(t.form.model,"dialogWidth",e)},expression:"form.model.dialogWidth"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"高度：",prop:"dialogHeight"}},[o("el-input",{attrs:{placeholder:"默认 70%"},model:{value:t.form.model.dialogHeight,callback:function(e){t.$set(t.form.model,"dialogHeight",e)},expression:"form.model.dialogHeight"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"可全屏：",prop:"dialogFullscreen"}},[o("el-switch",{model:{value:t.form.model.dialogFullscreen,callback:function(e){t.$set(t.form.model,"dialogFullscreen",e)},expression:"form.model.dialogFullscreen"}})],1)],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:10,offset:2}},[o("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[o("el-input",{model:{value:t.form.model.sort,callback:function(e){t.$set(t.form.model,"sort",e)},expression:"form.model.sort"}})],1)],1),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"显示：",prop:"show"}},[o("el-switch",{model:{value:t.form.model.show,callback:function(e){t.$set(t.form.model,"show",e)},expression:"form.model.show"}})],1)],1)],1),o("el-row",{attrs:{gutter:50}},[o("el-col",{attrs:{span:20,offset:2}},[o("el-form-item",{attrs:{label:"备注：",prop:"remarks"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.model.remarks,callback:function(e){t.$set(t.form.model,"remarks",e)},expression:"form.model.remarks"}})],1)],1)],1)],1)},[],!1,null,null,null).exports;function E(e,t,o,r,n,l,s){try{var a=e[l](s),i=a.value}catch(e){return void o(e)}a.done?t(i):Promise.resolve(i).then(r,n)}var N,L={mixins:[a.b.dialog],components:{NodeMenu:C,RouteMenu:P,LinkMenu:j},data:function(){return{model:{type:0},dialog:{title:"编辑菜单",icon:"add",width:"60%",class:"nm-admin-menu-edit",loading:!1},on:{success:this.onSuccess,error:this.onError,"validate-error":this.onValidateError}}},props:["parent","id"],methods:{edit:(N=function(a){return function(){var e=this,s=arguments;return new Promise(function(t,o){var r=a.apply(e,s);function n(e){E(r,t,o,n,l,"next",e)}function l(e){E(r,t,o,n,l,"throw",e)}n(void 0)})}}(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.id)return this._warning("请选择要编辑的菜单~"),e.abrupt("return");e.next=3;break;case 3:return this.dialog.loading=!0,e.next=6,l.a.edit(this.id);case 6:this.model=e.sent,this.setModel(),this.dialog.loading=!1;case 9:case"end":return e.stop()}},e,this)})),function(){return N.apply(this,arguments)}),onOpen:function(){this.edit()},onSubmit:function(){this.dialog.loading=!0,this.getModel().submit()},onReset:function(){var e=this;this.$nextTick(function(){e.getModel().reset()})},onSuccess:function(){this.dialog.loading=!1,this.$emit("success")},onError:function(){this.dialog.loading=!1},onValidateError:function(){this.dialog.loading=!1},setModel:function(){var e=this;this.$nextTick(function(){e.getModel().setModel()})},getModel:function(){return 0===this.model.type?this.$refs.node:1===this.model.type?this.$refs.route:this.$refs.link}}},T=Object(c.a)(L,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-dialog",t._b({attrs:{visible:t.visible_},on:{open:t.onOpen,"update:visible":function(e){t.visible_=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("nm-button",{attrs:{text:"保存",type:"success"},on:{click:t.onSubmit}}),o("nm-button",{attrs:{text:"重置",type:"info"},on:{click:t.onReset}})]},proxy:!0}])},"nm-dialog",t.dialog,!1),[0===t.model.type?o("node-menu",t._g({ref:"node",attrs:{model:t.model,parent:t.parent}},t.on)):1===t.model.type?o("route-menu",t._g({ref:"route",attrs:{model:t.model,parent:t.parent}},t.on)):o("link-menu",t._g({ref:"link",attrs:{model:t.model,parent:t.parent}},t.on))],1)},[],!1,null,null,null).exports,q=o("e0f9");function M(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var B="admin/button/",I=q.b.crud(B),A={getPermissionList:B+"PermissionList",bindPermission:B+"bindPermission",sync:B+"sync"},F=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){M(t,e,o[e])})}return t}({},I,{getPermissionList:function(e){return q.b.get(A.getPermissionList,{id:e})},bindPermission:function(e){return q.b.post(A.bindPermission,e)},sync:function(e){return q.b.post(A.sync,e)}}),W=[{name:"id",label:"编号",show:!1},{name:"name",label:"名称",width:"150"},{name:"code",label:"编码"},{name:"icon",label:"图标"}],R=o("151b"),V=o("5b72"),K={components:{ModuleInfoSelect:d.a},data:function(){return{loading:!1,split:.2,list:{title:"权限列表",footerReverse:!0,noSelectColumn:!0,labelWidth:"70px",action:R.a.query,advanced:{enabled:!0},model:{moduleCode:"",name:"",controller:"",action:""},cols:[{name:"moduleName",label:"所属模块",width:120},{name:"name",label:"名称",width:300},{name:"controller",label:"控制器"},{name:"action",label:"方法"}]},selection:[]}},props:{query:Function,action:Function},computed:{permissionList:function(){return this.selection?this.selection.map(function(e){return e.value}):[]}},methods:{add:function(t){this.selection.every(function(e){return e.value!==t.id})&&this.selection.push({label:t.name,value:t.id})},notIn:function(t){return t.hasIn=!this.selection.every(function(e){return e.value!==t.id}),!t.hasIn},save:function(){var t=this;this.loading=!0,this.action(this.permissionList).then(function(e){t._success("绑定成功"),t.loading=!1,t.$emit("success")}).catch(function(){t.loading=!1})},refresh:function(){this.querySelection(),this.$refs.list.refresh()},querySelection:function(){var t=this;this.selection=[],this.loading=!0,this.query().then(function(e){e.forEach(function(e){t.selection.push({label:e.name,value:e.id})}),t.loading=!1})},getAllControllerAction:function(){return V.a.getAllController({module:this.list.model.moduleCode})},getAllAction:function(){var e=this.list.model;return V.a.getAllAction({module:e.moduleCode,controller:e.controller})},onModuleChange:function(){this.$refs.controllerSelect.refresh()},onControllerChange:function(){this.$refs.actionSelect.refresh()}}},H=Object(c.a)(K,function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("nm-split",{staticClass:"permission-bind",attrs:{loading:o.loading},scopedSlots:o._u([{key:"left",fn:function(){return[r("nm-listbox",{attrs:{title:"已选列表"},model:{value:o.selection,callback:function(e){o.selection=e},expression:"selection"}})]},proxy:!0},{key:"right",fn:function(){return[r("nm-list",o._b({ref:"list",scopedSlots:o._u([{key:"querybar",fn:function(){return[r("el-form-item",{attrs:{label:"名称：",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:o.list.model.name,callback:function(e){o.$set(o.list.model,"name",e)},expression:"list.model.name"}})],1)]},proxy:!0},{key:"querybar-advanced",fn:function(){return[r("el-row",[r("el-col",{attrs:{span:20,offset:1}},[r("el-form-item",{attrs:{label:"模块：",prop:"moduleCode"}},[r("module-info-select",{on:{change:o.onModuleChange},model:{value:o.list.model.moduleCode,callback:function(e){o.$set(o.list.model,"moduleCode",e)},expression:"list.model.moduleCode"}})],1),r("el-form-item",{attrs:{label:"控制器：",prop:"controller"}},[r("nm-select",{ref:"controllerSelect",attrs:{method:o.getAllControllerAction},on:{change:o.onControllerChange},scopedSlots:o._u([{key:"default",fn:function(e){var t=e.options;return o._l(t,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[r("span",[o._v(o._s(e.label)+"("+o._s(e.value)+")")])])})}}]),model:{value:o.list.model.controller,callback:function(e){o.$set(o.list.model,"controller",e)},expression:"list.model.controller"}})],1),r("el-form-item",{attrs:{label:"方法：",prop:"action"}},[r("nm-select",{ref:"actionSelect",attrs:{method:o.getAllAction},scopedSlots:o._u([{key:"default",fn:function(e){var t=e.options;return o._l(t,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[r("span",[o._v(o._s(e.label)+"("+o._s(e.value)+")")])])})}}]),model:{value:o.list.model.action,callback:function(e){o.$set(o.list.model,"action",e)},expression:"list.model.action"}})],1)],1)],1)]},proxy:!0},{key:"col-operation",fn:function(e){var t=e.row;return[o.notIn(t)?r("nm-button",{attrs:{icon:"add",type:"success",circle:""},on:{click:function(e){return o.add(t)}}}):r("el-tag",{attrs:{type:"warning","disable-transitions":""}},[o._v("已选")])]}},{key:"footer",fn:function(){return[r("nm-button",{attrs:{type:"success",text:"保存"},on:{click:o.save}})]},proxy:!0}])},"nm-list",o.list,!1))]},proxy:!0}]),model:{value:o.split,callback:function(e){o.split=e},expression:"split"}})},[],!1,null,null,null).exports,U={mixins:[a.b.dialog],components:{BindPage:H},data:function(){return{id_:""}},props:["id","name"],computed:{dialog:function(){return{noScrollbar:!0,noFooter:!0,title:"权限绑定(".concat(this.name,")"),icon:"bind",width:"70%",height:"70%"}}},methods:{query:function(){return F.getPermissionList(this.id)},action:function(e){return F.bindPermission({id:this.id,permissionList:e})},onOpen:function(){var e=this;this.id&&this.id!==this.id_&&this.$nextTick(function(){e.$refs.bind.refresh()}),this.id_=this.id}}},Q=Object(c.a)(U,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-dialog",t._b({attrs:{visible:t.visible_},on:{"update:visible":function(e){t.visible_=e},open:t.onOpen}},"nm-dialog",t.dialog,!1),[o("bind-page",{ref:"bind",attrs:{query:t.query,action:t.action}})],1)},[],!1,null,null,null).exports,D={mixins:[a.b.dialog],components:{PermissionBindPage:Q},data:function(){return{list:{noHeader:!0,action:F.query,model:{menuId:"",name:""},cols:W},curr:{},dialog:{perBind:!1},removeAction:F.remove}},props:["menu"],computed:{dialog_:function(){return{title:"按钮管理--".concat(this.menu.name),icon:"detail",width:"70%",height:"80%"}},buttons:function(){var t=this,e=[],o=this.$router.options.routes.filter(function(e){return e.name===t.menu.routeName&&e.meta&&e.meta.buttons})[0].meta.buttons;if(o)for(var r in o)e.push(o[r]);return e}},methods:{refresh:function(){this.$refs.list&&this.$refs.list.refresh()},sync:function(){var o=this;this._confirm("您确认要同步按钮信息吗","同步按钮信息").then(function(){var t={menuId:o.menu.id,buttons:[]};o.buttons.map(function(e){t.buttons.push({name:e.text,code:e.code,icon:e.icon})}),F.sync(t).then(function(e){o._success("同步成功"),o.refresh()})})},bindPermission:function(e){this.curr=e,this.dialog.perBind=!0},onOpen:function(){var e=this.list.model.menuId!==this.menu.id;this.list.model.menuId=this.menu.id,this.list.model.menuId&&e&&this.refresh()}}},z=Object(c.a)(D,function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("nm-list-dialog",o._b({attrs:{visible:o.visible_},on:{open:o.onOpen,"update:visible":function(e){o.visible_=e}}},"nm-list-dialog",o.dialog_,!1),[r("nm-list",o._b({ref:"list",scopedSlots:o._u([{key:"querybar",fn:function(){return[r("el-form-item",{attrs:{label:"名称：",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:o.list.model.name,callback:function(e){o.$set(o.list.model,"name",e)},expression:"list.model.name"}})],1)]},proxy:!0},{key:"querybar-buttons",fn:function(){return[r("nm-button",{attrs:{type:"success",text:"同步",icon:"refresh"},on:{click:o.sync}})]},proxy:!0},{key:"col-operation",fn:function(e){var t=e.row;return[r("nm-button",{attrs:{text:"权限",icon:"bind",type:"text"},on:{click:function(e){return o.bindPermission(t)}}}),r("nm-button-delete",{attrs:{action:o.removeAction,id:t.id},on:{success:o.refresh}})]}}])},"nm-list",o.list,!1)),r("permission-bind-page",o._b({attrs:{visible:o.dialog.perBind},on:{"update:visible":function(e){return o.$set(o.dialog,"perBind",e)}}},"permission-bind-page",o.curr,!1))],1)},[],!1,null,null,null).exports,J={mixins:[a.b.dialog],components:{BindPage:H},data:function(){return{id_:""}},props:["id","name"],computed:{dialog:function(){return{noScrollbar:!0,noFooter:!0,title:"权限绑定(".concat(this.name,")"),icon:"bind",width:"70%",height:"70%"}}},methods:{query:function(){return l.a.permissionList(this.id)},action:function(e){return l.a.bindPermission({id:this.id,permissionList:e})},onOpen:function(){var e=this;this.id&&this.id!==this.id_&&this.$nextTick(function(){e.$refs.bind.refresh()}),this.id_=this.id}}},G=Object(c.a)(J,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-dialog",t._b({attrs:{visible:t.visible_},on:{"update:visible":function(e){t.visible_=e},open:t.onOpen}},"nm-dialog",t.dialog,!1),[o("bind-page",{ref:"bind",attrs:{query:t.query,action:t.action}})],1)},[],!1,null,null,null).exports,X=o("1264");function Y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Z={name:n.default.name,components:{MenuTree:X.a,AddPage:k,EditPage:T,ButtonBindPage:z,PermissionBindPage:G},data:function(){return{split:.2,list:{cols:s,action:l.a.query,labelWidth:"60px",model:{parentId:"",name:"",code:""}},remove:l.a.remove,total:0,dialog:{add:!1,edit:!1,prev:!1,btnBind:!1,perBind:!1,sort:!1},currentMenu:{},menu:{id:"",name:"",path:""},buttons:n.default.buttons}},computed:{title:function(){return"菜单列表—"+this.menu.name},dragSort:function(){return{queryAction:this.querySortList,updateAction:l.a.updateSortList}}},methods:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){Y(t,e,o[e])})}return t}({},Object(r.d)("module/admin",["setCurrentMenu"]),{refresh:function(e){this.list.model.parentId=this.menu.id,this.$refs.list.refresh(),e&&this.refreshTree()},refreshTree:function(){this.$refs.tree.refresh()},onTreeSelectChange:function(e){var t=e.menu,o=e.path;this.menu.id=t.id,this.menu.name=t.name,this.menu.path=o,this.refresh()},add:function(e){this.total=e,this.dialog.add=!0},edit:function(e){this.currentMenu=e,this.dialog.edit=!0},bindButton:function(e){this.currentMenu=e,this.dialog.btnBind=!0},bindPermission:function(e){this.currentMenu=e,this.dialog.perBind=!0},querySortList:function(){return l.a.querySortList(this.menu.id)},openSort:function(){this.dialog.sort=!0}})},ee=Object(c.a)(Z,function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("nm-container",[r("nm-split",{scopedSlots:o._u([{key:"left",fn:function(){return[r("nm-box",{attrs:{page:"",header:"",title:"菜单树",type:"success",icon:"menu",toolbar:null}},[r("menu-tree",{ref:"tree",on:{"select-change":o.onTreeSelectChange}})],1)]},proxy:!0},{key:"right",fn:function(){return[r("nm-list",o._b({ref:"list",attrs:{title:o.title},scopedSlots:o._u([{key:"querybar",fn:function(){return[r("el-form-item",{attrs:{label:"名称：",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:o.list.model.name,callback:function(e){o.$set(o.list.model,"name",e)},expression:"list.model.name"}})],1),r("el-form-item",{attrs:{label:"编码：",prop:"code"}},[r("el-input",{attrs:{clearable:""},model:{value:o.list.model.code,callback:function(e){o.$set(o.list.model,"code",e)},expression:"list.model.code"}})],1)]},proxy:!0},{key:"querybar-buttons",fn:function(e){var t=e.total;return[r("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.add,expression:"buttons.add"}],attrs:{type:"success",icon:"add",text:"添加"},on:{click:function(e){return o.add(t)}}}),r("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.sort,expression:"buttons.sort"}],attrs:{type:"warning",text:"排序",icon:"sort"},on:{click:o.openSort}})]}},{key:"col-typeName",fn:function(e){var t=e.row;return[0===t.type?r("el-tag",{attrs:{type:"success"}},[o._v(o._s(t.typeName))]):o._e(),1===t.type?r("el-tag",{attrs:{type:"warning"}},[o._v(o._s(t.typeName))]):o._e(),2===t.type?r("el-tag",[o._v(o._s(t.typeName))]):o._e()]}},{key:"col-icon",fn:function(e){var t=e.row;return[t.icon?r("el-tooltip",{attrs:{content:t.icon,effect:"dark",placement:"right"}},[r("label",[r("nm-icon",{attrs:{name:t.icon,size:"20px"}})],1)]):r("label",[o._v("无")])]}},{key:"col-show",fn:function(e){var t=e.row;return[o._v(o._s(t.show?"是":"否"))]}},{key:"col-operation",fn:function(e){var t=e.row;return[r("el-dropdown",{attrs:{trigger:"click"}},[r("span",{staticClass:"el-dropdown-link"},[o._v("\n              操作\n              "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{staticClass:"nm-list-operation-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.edit,expression:"buttons.edit"}],attrs:{icon:"edit",text:"编辑",type:"text"},on:{click:function(e){return o.edit(t)}}})],1),1===t.type?r("el-dropdown-item",[r("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.bindPermission,expression:"buttons.bindPermission"}],attrs:{id:t.id,icon:"bind",text:"权限",type:"text"},on:{click:function(e){return o.bindPermission(t)}}})],1):o._e(),1===t.type?r("el-dropdown-item",[r("nm-button",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.bindButton,expression:"buttons.bindButton"}],attrs:{icon:"bind",text:"按钮",type:"text"},on:{click:function(e){return o.bindButton(t)}}})],1):o._e(),r("el-dropdown-item",[r("nm-button-delete",{directives:[{name:"nm-has",rawName:"v-nm-has",value:o.buttons.del,expression:"buttons.del"}],attrs:{action:o.remove,id:t.id},on:{success:function(e){return o.refresh(!0)}}})],1)],1)],1)]}}])},"nm-list",o.list,!1))]},proxy:!0}]),model:{value:o.split,callback:function(e){o.split=e},expression:"split"}}),r("add-page",{attrs:{parent:o.menu,sort:o.total,visible:o.dialog.add},on:{"update:visible":function(e){return o.$set(o.dialog,"add",e)},success:function(e){return o.refresh(!0)}}}),r("edit-page",{attrs:{parent:o.menu,id:o.currentMenu.id,visible:o.dialog.edit},on:{"update:visible":function(e){return o.$set(o.dialog,"edit",e)},success:function(e){return o.refresh(!0)}}}),r("button-bind-page",{attrs:{menu:o.currentMenu,visible:o.dialog.btnBind},on:{"update:visible":function(e){return o.$set(o.dialog,"btnBind",e)}}}),r("permission-bind-page",o._b({attrs:{visible:o.dialog.perBind},on:{"update:visible":function(e){return o.$set(o.dialog,"perBind",e)}}},"permission-bind-page",o.currentMenu,!1)),r("nm-drag-sort-dialog",o._b({attrs:{visible:o.dialog.sort},on:{"update:visible":function(e){return o.$set(o.dialog,"sort",e)},success:function(e){return o.refresh(!0)}}},"nm-drag-sort-dialog",o.dragSort,!1))],1)},[],!1,null,null,null);t.default=ee.exports},1264:function(e,t,o){"use strict";var r=o("2f62"),n=o("e84a");function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var s={data:function(){return{tree:[],menus:[],current:{id:this.value||"",checked:!1,menu:null,node:null,path:""}}},props:{value:String,showCheckbox:Boolean,showIcon:{type:Boolean,default:!0},checkedKeys:Array,pathSeparator:{type:String,default:"/"}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){l(t,e,o[e])})}return t}({},Object(r.e)("app/system",{systemTitle:"title"}),{rootMenu:function(){return{id:"",label:this.systemTitle,children:[],menu:{id:"",name:this.systemTitle,icon:"system"}}}}),methods:{refresh:function(){var t=this;n.a.getTree().then(function(e){t.rootMenu.children=t.menus2Tree(e),t.tree=[t.rootMenu],t.setCheckedKeys(),t.setCurrentKey()})},menus2Tree:function(e){var o=this,r=[];return 0<e.length&&e.map(function(e){e.icon=e.icon||"list";var t={id:e.id,label:e.name,menu:e};o.menus.push(e),0===e.type&&(t.children=o.menus2Tree(e.children)),r.push(t)}),r},setCurrentKey:function(e){var t=this;this.$nextTick(function(){t.$refs.tree.setCurrentKey(e||t.current.id)})},setCheckedKeys:function(){var e=this;this.checkedKeys&&this.$nextTick(function(){e.$refs.tree.setCheckedKeys(e.checkedKeys)})},onSelectChange:function(e,t){if(!this.current.id||e.menu.id!==this.current.id){this.current.id=e.menu.id,this.current.menu=e.menu;var o=this.getFullPath(t);o=o?o.substring(0,o.length-2):this.systemTitle,this.current.path=o,t&&(this.current.checked=t.checked,this.current.node=t),this.$emit("input",this.current.id),this.$emit("select-change",this.current)}},onCheck:function(e,t){var o=[];t.checkedNodes.map(function(e){e.menu.id&&o.push(e.menu)}),t.halfCheckedNodes.map(function(e){e.menu.id&&o.push(e.menu)}),this.$emit("check",o)},onCheckChange:function(e,t,o){this.$emit("check-change",e,t,o)},getFullPath:function(e,t){return t||(t=""),e&&void 0!==e.key&&(t="".concat(e.label," ").concat(this.pathSeparator," ").concat(t),t=this.getFullPath(e.parent,t)),t}},mounted:function(){this.refresh(),this.onSelectChange(this.rootMenu,this.current.node)},watch:{checkedKeys:function(){this.setCheckedKeys()}}},a=(o("a202"),o("2877")),i=Object(a.a)(s,function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("el-tree",{ref:"tree",staticClass:"nm-admin-menu-tree",attrs:{"node-key":"id","default-expand-all":"","highlight-current":"",data:r.tree,"show-checkbox":r.showCheckbox,"current-node-key":this.current.id,"expand-on-click-node":!1},on:{"current-change":r.onSelectChange,check:r.onCheck,"check-change":r.onCheckChange},scopedSlots:r._u([{key:"default",fn:function(e){var t=e.node,o=e.data;return n("div",{staticClass:"nm-menu-tree-node"},[n("div",{staticClass:"nm-menu-tree-node-label"},[r.showIcon?n("nm-icon",{attrs:{name:o.menu.icon}}):r._e(),r._v("\n      "+r._s(t.label)+"\n    ")],1)])}}])})},[],!1,null,null,null);t.a=i.exports},"151b":function(e,t,o){"use strict";var r=o("e0f9");function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l="admin/permission/",s=r.b.crud(l),a={controllers:l+"Controllers",actions:l+"Actions",sync:l+"sync"};t.a=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){n(t,e,o[e])})}return t}({},s,{sync:function(){return r.b.post(a.sync)}})},"1ec8":function(e,t,o){"use strict";o.r(t);var r=o("2f62"),n=o("5b72"),l=o("367a");function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a={name:l.default.name,data:function(){return{form:{title:l.default.title,icon:"system",successMsg:!1,btnReset:!1,action:n.a.updateConfig,model:{title:"",logo:"",logoUrl:"",home:"",buttonPermission:!1,auditing:!1,loginVerifyCode:!1,toolbar:{fullscreen:!1,skin:!1,logout:!1,userInfo:!1}}}}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){s(t,e,o[e])})}return t}({},Object(r.e)("module/admin/token",["accessToken"]),{logoUpload:function(){return{action:n.a.uploadLogoUrl(),headers:{Authorization:"Bearer "+this.accessToken},"show-file-list":!1,"before-upload":this.beforeLogoUpload,"on-success":this.handleLogoSuccess}}}),methods:{query:function(){var t=this;n.a.getConfig().then(function(e){t.form.model=e,t.form.model.logoUrl||(t.form.model.logoUrl="./images/logo.png")})},onSuccess:function(){this._confirm("需要刷新页面才可看到修改后的效果，是否刷新页面？","修改成功","success").then(function(){window.location.reload()})},beforeLogoUpload:function(e){return"image/jpeg"!==e.type&&"image/png"!==e.type?(this._error("上传Logo图片只能是 JPG/PNG 格式!"),!1):!(512<e.size/1024)||(this._error("上传Logo图片大小不能超过 500KB!"),!1)},handleLogoSuccess:function(e,t){1===e.code&&(this.form.model.logo=e.data.path,this.form.model.logoUrl=e.data.url)}},created:function(){this.query()},activated:function(){this.query()}},i=(o("4482"),o("2877")),m=Object(i.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-container",[o("nm-form-page",t._b({ref:"form",on:{success:t.onSuccess}},"nm-form-page",t.form,!1),[o("el-divider",{attrs:{"content-position":"left"}},[t._v("基础信息")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"标题：",prop:"title"}},[o("el-input",{model:{value:t.form.model.title,callback:function(e){t.$set(t.form.model,"title",e)},expression:"form.model.title"}})],1),o("el-form-item",{attrs:{label:"首页：",prop:"home"}},[o("el-input",{model:{value:t.form.model.home,callback:function(e){t.$set(t.form.model,"home",e)},expression:"form.model.home"}})],1)],1),o("el-col",{attrs:{span:10,offset:1}},[o("el-form-item",{attrs:{label:"Logo：",prop:"logo"}},[o("el-upload",t._b({staticClass:"logo-uploader"},"el-upload",t.logoUpload,!1),[t.form.model.logoUrl?o("img",{staticClass:"logo-uploader-img",attrs:{src:t.form.model.logoUrl}}):o("i",{staticClass:"el-icon-plus logo-uploader-icon"})])],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("登录控制")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"启用验证码：",prop:"loginVerifyCode"}},[o("el-switch",{model:{value:t.form.model.loginVerifyCode,callback:function(e){t.$set(t.form.model,"loginVerifyCode",e)},expression:"form.model.loginVerifyCode"}})],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("工具栏")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"全屏控制：",prop:"toolbar.fullscreen"}},[o("el-switch",{model:{value:t.form.model.toolbar.fullscreen,callback:function(e){t.$set(t.form.model.toolbar,"fullscreen",e)},expression:"form.model.toolbar.fullscreen"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"皮肤设置：",prop:"toolbar.skin"}},[o("el-switch",{model:{value:t.form.model.toolbar.skin,callback:function(e){t.$set(t.form.model.toolbar,"skin",e)},expression:"form.model.toolbar.skin"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"退出按钮：",prop:"toolbar.logout"}},[o("el-switch",{model:{value:t.form.model.toolbar.logout,callback:function(e){t.$set(t.form.model.toolbar,"logout",e)},expression:"form.model.toolbar.logout"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"用户信息：",prop:"toolbar.userInfo"}},[o("el-switch",{model:{value:t.form.model.toolbar.userInfo,callback:function(e){t.$set(t.form.model.toolbar,"userInfo",e)},expression:"form.model.toolbar.userInfo"}})],1)],1)],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("开发属性")]),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5,offset:1}},[o("el-form-item",{attrs:{label:"按钮权限：",prop:"buttonPermission"}},[o("el-switch",{model:{value:t.form.model.buttonPermission,callback:function(e){t.$set(t.form.model,"buttonPermission",e)},expression:"form.model.buttonPermission"}})],1)],1),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"审计日志：",prop:"auditing"}},[o("el-switch",{model:{value:t.form.model.auditing,callback:function(e){t.$set(t.form.model,"auditing",e)},expression:"form.model.auditing"}})],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=m.exports},4482:function(e,t,o){"use strict";var r=o("5942");o.n(r).a},5942:function(e,t,o){},6876:function(e,t,o){"use strict";var r=o("6d99");o.n(r).a},"6d99":function(e,t,o){},"6e0d":function(e,t,o){"use strict";var r=o("e0f9");function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l="admin/moduleinfo/",s=r.b.crud(l),a={select:l+"select",sync:l+"sync"};t.a=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){n(t,e,o[e])})}return t}({},s,{select:function(){return r.b.get(a.select)},sync:function(){return r.b.post(a.sync)}})},a202:function(e,t,o){"use strict";var r=o("078b");o.n(r).a},c17f:function(e,t,o){"use strict";var r=o("3ee3"),n=o("6e0d"),l={mixins:[r.b.select],data:function(){return{action:n.a.select}}},s=o("2877"),a=Object(s.a)(l,void 0,void 0,!1,null,null,null);t.a=a.exports},e84a:function(e,t,o){"use strict";var r=o("e0f9");function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l="admin/menu/",s=r.b.crud(l),a={getTree:l+"tree",getTargetSelect:l+"targetselect",permissionList:l+"PermissionList",bindPermission:l+"bindPermission",buttonList:l+"buttonlist",sort:l+"sort"};t.a=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(e){n(t,e,o[e])})}return t}({},s,{getTree:function(){return r.b.get(a.getTree)},getTargetSelect:function(){return r.b.get(a.getTargetSelect)},permissionList:function(e){return r.b.get(a.permissionList,{id:e})},bindPermission:function(e){return r.b.post(a.bindPermission,e)},buttonList:function(e){return r.b.get(a.buttonList,{id:e})},querySortList:function(e){return r.b.get(a.sort,{parentId:e})},updateSortList:function(e){return r.b.post(a.sort,e)}})}}]);